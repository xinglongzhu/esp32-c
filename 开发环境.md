## 资料查找

- 在乐鑫官网查找到对应 SDK 下载链接
  - https://www.espressif.com/zh-hans/support/download/sdks-demos?keys=
- 跳转到 github espressif/esp-idf
  - https://github.com/espressif/esp-idf
- 点击 Developing With ESP-IDF/Setting Up ESP-IDF/Versions 跳转到
  - https://docs.espressif.com/projects/esp-idf/zh_CN/latest/esp32/versions.html

## 环境搭建

- windows 下载离线安装包(资料查找最后一个链接左上角选择对应的版本)

  - https://dl.espressif.com/dl/esp-idf/?idf=4.4

- 选择路径安装后便会出现 **Espressif-IDE**      **ESP-IDF 4.4 PowerShell**      **ESP-IDF 4.4 CMD** 图标

  为了方便我设置了环境变量可以在任何位置使用此命令行

  - 在用户变量设置我的路径 H:\esp32_c3\Espressif\frameworks\esp-idf-v4.4
  - 在任何位置打开 cmd 输入 export.bat 就会设置好环境可以使用 idf.py 命令来编译了

- Espressif-IDE 还没有使用后面有使用再研究(开源软件可以放心使用)

- 因为比较习惯使用 vscode 所以搭建了下 vscode 环境(https://github.com/espressif/vscode-esp-idf-extension)

  - 安装Espressif IDF扩展(https://github.com/espressif/vscode-esp-idf-extension/blob/master/docs/tutorial/install.md)
  - 注意选择 USE EXISTING SETUP 等待设置完成(关闭翻墙)
  
  
  
## 编译烧录

- F1 输入 Show Examples Projects

- 选择 get-started/blink

- 点击 Creat project using example blink 选择工程路径

- 选择目标板
  - F1 输入 Set Espressif device target
  - 我选的 ESP32-C3(ESP-PROG JTAG)
  
- 配置 menuconfig (这个暂时没用到，只介绍下如何使用)
  - F1 输入 SDK Configuration editor
  - 设置完成后点击保存，直接关闭此窗口
  
- 编译
  - F1 输入 Build your project 等待编译完成
  
- 选择端口
  - F1 输入 Select port 选在连接的端口
  
- 烧录(可选择 uart 或者 jtag)
  
  - esp32-c3  8 脚接电源 9 脚接地，串口 rx tx gnd 接串口板对应的引脚
  
  - F1 输入  Flash your project 等待烧录完成
  
- 串口打印输出
  - F1 输入  Monitor your device 在终端可以打印 log 信息
  - 注意 esp32-c3 烧录后要把 8 脚接地 9 脚接电源

  

## 手动搭建开发环境

- https://docs.espressif.com/projects/esp-idf/zh_CN/release-v4.3/esp32/get-started/index.html#get-started-set-up-tools
- https://docs.espressif.com/projects/esp-at/zh_CN/latest/esp32/Compile_and_Develop/How_to_clone_project_and_compile_it.html

## 命令记录

- at 指令使用 idf-4.3 在 H:\esp32_c3\esp\esp-idf 目录下输入 export.bat
- 拷贝需要的工程到自己的位置编译(esp-at 使用 idf-4.3 版本)

- ```
  设置目标芯片
  idf.py set-target esp32
  
  esp32 — 适用于 ESP32-D0WD、ESP32-D2WD、ESP32-S0WD (ESP-SOLO)、ESP32-U4WDH、ESP32-PICO-D4
  esp32s2— 适用于 ESP32-S2
  esp32c3— 适用于 ESP32-C3
  ```

- ```
  idf.py menuconfig
  ```

- ```
  idf.py build
  ```

- ```
  idf.py -p com31 -b 460800 flash
  ```

- ```c
  idf.py -p com31 monitor
  ```

  

## ESP-IDF 工具更新

- 每一个 esp-idf 在 github 中都有不同的版本，对应的工具也一样，可以通过 idf.py --version 查看对应版本

  - esp-idf github 下载链接 https://github.com/espressif/esp-idf

- 更新版本

  ```c
  cd $IDF_PATH
  git fetch
  git checkout vX.Y.Z
  git submodule update --init --recursive
  ```

- 举例操作

  - 下载最新版本 esp-idf

    ```c
    git clone git@github.com:espressif/esp-idf.git
    ```
  
  
  - 查看分支
  
    ```c
    git branch -a
    ```
  ![image](https://user-images.githubusercontent.com/38969209/174028600-7d6df7d8-fae3-4c0b-8f82-5520643d7110.png)

  - 切换到需要的分支
  
    ```c
    git fetch
    git checkout release/v4.4
    ```
  
  - 更新子分支
  
    ```c
    git submodule update --init --recursive
    ```
  
  - 安装工具（因为我使用的是 git 所以使用下面的命令）
  
    - 先设置自己的路径
  
      ```c
      环境变量设置如下
      IDF_TOOLS_PATH 值为 H:\esp32_c3\idf-tool
      ```
  
    - 安装工具
  
      ```c
      ./install.sh  或者 ./install.sh all 一次性为所有支持目标芯片安装工具
      ```
  
      
  
  - 导出设置
  
    - git 使用如下命令
  
      ```c
      . ./export.sh
      ```
      
     - cmd 使用如下命令
    
       ```c
       export.bat
       ```
    
       



